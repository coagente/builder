# =============================================================================
# DESPIECE-BOT - Environment Variables Template
# =============================================================================
# Copy this file to .env.local and fill in your actual values
# Never commit .env.local to version control

# =============================================================================
# CORE APPLICATION SETTINGS
# =============================================================================
APP_NAME=despiece-bot
APP_VERSION=1.0.0
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=INFO

# Server Configuration
HOST=0.0.0.0
PORT=8000
WORKERS=4

# =============================================================================
# GOOGLE GENAI API CONFIGURATION
# =============================================================================
# Get your API key from: https://ai.google.dev/gemini-api/docs/api-key
GOOGLE_AI_API_KEY=your_google_genai_api_key_here

# Gemini Model Configuration
GEMINI_PRO_MODEL=gemini-2.0-flash-exp
GEMINI_FLASH_MODEL=gemini-2.0-flash-exp
GEMINI_MAX_TOKENS=8192
GEMINI_TEMPERATURE=0.1

# Rate Limiting for Gemini API
GEMINI_RATE_LIMIT_PER_MINUTE=60
GEMINI_RATE_LIMIT_PER_DAY=1000

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL Configuration
DATABASE_URL=postgresql://despiece_user:secure_password@localhost:5432/despiece_bot
POSTGRES_DB=despiece_bot
POSTGRES_USER=despiece_user
POSTGRES_PASSWORD=secure_password
POSTGRES_HOST=localhost
POSTGRES_PORT=5432

# Database Pool Settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30

# =============================================================================
# LANCEDB CONFIGURATION (Vector Database)
# =============================================================================
# LanceDB Path (embedded database)
LANCEDB_PATH=./data/lancedb
LANCEDB_TABLE_NAME=document_embeddings

# Vector Search Configuration
VECTOR_SEARCH_LIMIT=10
VECTOR_SIMILARITY_THRESHOLD=0.7

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
# Redis for caching and message queue
REDIS_URL=redis://localhost:6379/0
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# Redis Pool Configuration
REDIS_POOL_SIZE=20
REDIS_POOL_TIMEOUT=30

# Cache TTL Settings (in seconds)
CACHE_TTL_SHORT=300        # 5 minutes
CACHE_TTL_MEDIUM=1800      # 30 minutes
CACHE_TTL_LONG=7200        # 2 hours
CACHE_TTL_CALCULATION=86400 # 24 hours

# =============================================================================
# CELERY CONFIGURATION (Background Tasks)
# =============================================================================
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/1
CELERY_WORKER_CONCURRENCY=4
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json

# =============================================================================
# CREWAI CONFIGURATION
# =============================================================================
# CrewAI Agent Configuration
CREWAI_MEMORY_ENABLED=true
CREWAI_PLANNING_ENABLED=true
CREWAI_MAX_ITERATIONS=5
CREWAI_VERBOSE=true

# Agent-specific settings
INGESTOR_AGENT_MAX_ITER=3
REASONER_AGENT_MAX_ITER=5
QA_AGENT_MAX_ITER=3
VALIDATOR_AGENT_MAX_ITER=3

# =============================================================================
# DSPY CONFIGURATION
# =============================================================================
# DSPy for numerical validation
DSPY_CACHE_DIR=./cache/dspy
DSPY_MAX_BOOTSTRAPPED_DEMOS=8
DSPY_NUM_CANDIDATE_PROGRAMS=10
DSPY_OPTIMIZATION_ENABLED=true

# Validation thresholds
CALCULATION_TOLERANCE=0.05
CONFIDENCE_THRESHOLD=0.8
VALIDATION_REQUIRED_CONFIDENCE=0.9

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# JWT Configuration
SECRET_KEY=your_super_secret_jwt_key_minimum_32_characters_long
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_MINUTES=10080  # 7 days

# API Security
API_KEY_EXPIRY_DAYS=365
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_PER_HOUR=1000
RATE_LIMIT_PER_DAY=10000

# CORS Configuration
CORS_ORIGINS=http://localhost:3000,http://localhost:8080
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE
CORS_ALLOW_HEADERS=*

# =============================================================================
# FILE STORAGE CONFIGURATION
# =============================================================================
# Local file storage paths
UPLOAD_DIR=./storage/uploads
DOCUMENTS_DIR=./storage/documents
TEMP_DIR=./storage/temp
PROCESSED_DIR=./storage/processed

# File size limits (in bytes)
MAX_FILE_SIZE=52428800        # 50MB
MAX_DOCUMENT_PAGES=1000
ALLOWED_FILE_TYPES=pdf

# =============================================================================
# PROCESSING CONFIGURATION
# =============================================================================
# Document processing settings
OCR_LANGUAGE=spa+eng
OCR_DPI=300
IMAGE_QUALITY=85

# PDF processing
PDF_EXTRACT_IMAGES=true
PDF_EXTRACT_TABLES=true
PDF_EXTRACT_METADATA=true

# Embedding configuration
EMBEDDING_MODEL=text-embedding-004
EMBEDDING_DIMENSION=768
EMBEDDING_BATCH_SIZE=10

# =============================================================================
# MONITORING AND LOGGING
# =============================================================================
# Prometheus metrics
METRICS_ENABLED=true
METRICS_PORT=9090

# Logging configuration
LOG_FORMAT=json
LOG_FILE=./logs/app.log
LOG_ROTATION=daily
LOG_RETENTION_DAYS=30

# Health check configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30

# =============================================================================
# DEVELOPMENT/TESTING CONFIGURATION
# =============================================================================
# Development settings
DEV_RELOAD=true
DEV_DEBUG_TOOLBAR=true
DEV_PROFILER=true

# Testing configuration
TEST_DATABASE_URL=postgresql://test_user:test_password@localhost:5432/test_despiece_bot
TEST_REDIS_URL=redis://localhost:6379/15

# =============================================================================
# DOCKER CONFIGURATION
# =============================================================================
# Docker-specific environment variables
DOCKER_BUILDKIT=1
COMPOSE_DOCKER_CLI_BUILD=1

# Container resource limits
CONTAINER_MEMORY_LIMIT=2g
CONTAINER_CPU_LIMIT=2.0

# =============================================================================
# EXTERNAL SERVICES (Optional)
# =============================================================================
# Grafana (if using external instance)
GRAFANA_URL=http://localhost:3000
GRAFANA_PASSWORD=admin

# Prometheus (if using external instance)  
PROMETHEUS_URL=http://localhost:9090

# Elasticsearch (if using ELK stack)
ELASTICSEARCH_URL=http://localhost:9200

# =============================================================================
# BUSINESS LOGIC CONFIGURATION
# =============================================================================
# Construction-specific settings
DEFAULT_CURRENCY=USD
DEFAULT_UNIT_SYSTEM=metric
DEFAULT_LANGUAGE=es

# Material type validation
SUPPORTED_MATERIALS=hormigon,acero,ladrillo,madera,aluminio,vidrio

# Project configuration
MAX_PROJECTS_PER_USER=10
PROJECT_RETENTION_DAYS=365
CALCULATION_BACKUP_ENABLED=true 